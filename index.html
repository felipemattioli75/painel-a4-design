<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Painel A4 Design com Firebase</title>
  <script type="module">
    // Importa√ß√£o via m√≥dulo ES6 (Firebase Modular SDK)
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js";
    import { getFirestore, collection, getDocs, addDoc, deleteDoc, updateDoc, doc, onSnapshot } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCiuFQriY5F8t-uI7DBfOqjLXwCummLn20",
      authDomain: "painel-a4-design.firebaseapp.com",
      projectId: "painel-a4-design",
      storageBucket: "painel-a4-design.firebasestorage.app",
      messagingSenderId: "24296551886",
      appId: "1:24296551886:web:ea75027d8c0fcdcf13a79f"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    async function carregarFinanceiro() {
      const tabela = document.getElementById('tabela-financeiro');
      tabela.innerHTML = `
        <tr>
          <th>Cliente</th>
          <th>Valor</th>
          <th>Data do Pagamento</th>
          <th>Status</th>
          <th>A√ß√µes</th>
        </tr>
      `;

      const colRef = collection(db, "financeiro");
      onSnapshot(colRef, snapshot => {
        tabela.innerHTML = `
          <tr>
            <th>Cliente</th>
            <th>Valor</th>
            <th>Data do Pagamento</th>
            <th>Status</th>
            <th>A√ß√µes</th>
          </tr>
        `;
        snapshot.forEach(docSnap => {
          const data = docSnap.data();
          const row = document.createElement('tr');
          row.innerHTML = `
            <td>${data.cliente}</td>
            <td>${data.valor}</td>
            <td>${data.data}</td>
            <td class="${data.status}" onclick="alterarStatus('${docSnap.id}', '${data.status}')">${data.status === 'pago' ? 'Pago' : 'Pendente'}</td>
            <td><button onclick="deletarLinha('${docSnap.id}')">üóëÔ∏è</button></td>
          `;
          tabela.appendChild(row);
        });
      });
    }

    async function deletarLinha(id) {
      await deleteDoc(doc(db, "financeiro", id));
    }

    window.alterarStatus = async function(id, statusAtual) {
      const novoStatus = statusAtual === 'pago' ? 'pendente' : 'pago';
      const ref = doc(db, "financeiro", id);
      await updateDoc(ref, { status: novoStatus });
    }

    window.onload = () => {
      carregarFinanceiro();
    }
  </script>

  <style>
    body { font-family: Arial, sans-serif; background-color: #1e1e1e; color: #fff; padding: 2rem; }
    h2 { color: #00d2ff; }
    table { width: 100%; border-collapse: collapse; margin-top: 1rem; }
    th, td { padding: 0.75rem; border: 1px solid #333; }
    th { background: #111; }
    .pago { color: #00ff88; cursor: pointer; }
    .pendente { color: #ff4f4f; cursor: pointer; }
  </style>
</head>
<body>
  <h2>üí∞ Financeiro (dados reais no Firebase)</h2>
  <table id="tabela-financeiro">
    <tr>
      <th>Cliente</th>
      <th>Valor</th>
      <th>Data do Pagamento</th>
      <th>Status</th>
      <th>A√ß√µes</th>
    </tr>
  </table>
</body>
</html>
