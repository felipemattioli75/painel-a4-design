<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Painel A4 Design - Completo</title>
  <script type="module" src="https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js"></script>
  <script type="module" src="https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore.js"></script>
  <style>
    body { font-family: 'Segoe UI', sans-serif; background: #1e1e1e; color: #fff; margin: 0; padding: 0; }
    header { background: #0a3d62; padding: 1.5rem; font-size: 2rem; text-align: center; }
    nav { display: flex; gap: 1rem; padding: 1rem; background: #2c2c2c; justify-content: center; }
    nav button { background: #00d2ff; border: none; padding: 0.6rem 1.2rem; cursor: pointer; border-radius: 5px; font-weight: bold; }
    section { display: none; padding: 2rem; }
    .active { display: block; }
    table { width: 100%; border-collapse: collapse; margin-top: 1.5rem; background: #2a2a2a; }
    th, td { padding: 0.8rem; border: 1px solid #444; text-align: left; }
    th { background: #333; }
    input, select { padding: 0.5rem; border-radius: 5px; border: none; margin-right: 0.5rem; }
    .btn-add { margin-top: 1rem; background: #00ff88; color: #000; font-weight: bold; }
    .btn-delete { background: red; color: white; border: none; padding: 0.4rem 0.7rem; cursor: pointer; border-radius: 5px; }
  </style>
</head>
<body>
  <header>Painel Administrativo - A4 Design PRO üîó Firebase</header>
  <nav>
    <button onclick="showSection('clientes')">üë• Clientes</button>
    <button onclick="showSection('tarefas')">‚úÖ Tarefas</button>
    <button onclick="showSection('projetos')">üìÅ Projetos</button>
    <button onclick="showSection('financeiro')">üí∞ Financeiro</button>
  </nav>

  <!-- CLIENTES -->
  <section id="clientes" class="section active">
    <h2>Clientes</h2>
    <input type="text" id="nomeCliente" placeholder="Nome">
    <input type="text" id="telCliente" placeholder="Telefone">
    <input type="email" id="emailCliente" placeholder="E-mail">
    <button class="btn-add" onclick="addCliente()">Adicionar Cliente</button>
    <table id="tabela-clientes"><tr><th>Nome</th><th>Telefone</th><th>E-mail</th><th>A√ß√µes</th></tr></table>
  </section>

  <!-- TAREFAS (a implementar) -->
  <section id="tarefas" class="section">
    <h2>Tarefas</h2>
    <input type="text" id="tituloTarefa" placeholder="T√≠tulo da tarefa">
    <input type="text" id="dataTarefa" placeholder="Data de entrega">
    <input type="text" id="statusTarefa" placeholder="Status">
    <button class="btn-add">Adicionar Tarefa</button>
    <table id="tabela-tarefas"><tr><th>T√≠tulo</th><th>Data</th><th>Status</th><th>A√ß√µes</th></tr></table>
  </section>

  <!-- PROJETOS (a implementar) -->
  <section id="projetos" class="section">
    <h2>Projetos</h2>
    <input type="text" id="nomeProjeto" placeholder="Nome do projeto">
    <select id="clienteProjeto"><option value="">Selecione o cliente</option></select>
    <input type="text" id="etapasProjeto" placeholder="Etapas/Status">
    <button class="btn-add">Adicionar Projeto</button>
    <table id="tabela-projetos"><tr><th>Projeto</th><th>Cliente</th><th>Etapas</th><th>A√ß√µes</th></tr></table>
  </section>

  <!-- FINANCEIRO -->
  <section id="financeiro" class="section">
    <h2>Financeiro</h2>
    <input type="text" id="clienteFinanceiro" placeholder="Cliente">
    <input type="text" id="valorFinanceiro" placeholder="Valor">
    <input type="text" id="dataFinanceiro" placeholder="Data">
    <select id="statusFinanceiro">
      <option value="pendente">Pendente</option>
      <option value="pago">Pago</option>
    </select>
    <button class="btn-add" onclick="addFinanceiro()">Adicionar Pagamento</button>

    <table id="tabela-financeiro">
      <tr><th>Cliente</th><th>Valor</th><th>Data</th><th>Status</th><th>A√ß√µes</th></tr>
    </table>
  </section>

  <!-- Troca de Se√ß√µes -->
  <script>
    function showSection(id) {
      document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
      document.getElementById(id).classList.add('active');
    }
  </script>

  <!-- Firebase + Firestore -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js";
    import { getFirestore, collection, addDoc, getDocs, deleteDoc, doc } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore.js";

      const firebaseConfig = {
    apiKey: "AIzaSyCiuFQriY5F8t-uI7DBfOqjLXwCummLn20",
    authDomain: "painel-a4-design.firebaseapp.com",
    projectId: "painel-a4-design",
    storageBucket: "painel-a4-design.appspot.com",
    messagingSenderId: "24296551886",
    appId: "1:24296551886:web:ea75027d8c0fcdcf13a79f"
  };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // CLIENTES
    window.addCliente = async function () {
      const nome = document.getElementById("nomeCliente").value;
      const telefone = document.getElementById("telCliente").value;
      const email = document.getElementById("emailCliente").value;

      if (!nome || !telefone || !email) {
        alert("Preencha todos os campos!");
        return;
      }

      try {
        await addDoc(collection(db, "clientes"), { nome, telefone, email });
        alert("Cliente adicionado com sucesso!");
        document.getElementById("nomeCliente").value = "";
        document.getElementById("telCliente").value = "";
        document.getElementById("emailCliente").value = "";
        carregarClientes();
      } catch (e) {
        console.error("Erro ao adicionar cliente: ", e);
      }
    };

    async function carregarClientes() {
      const tabela = document.getElementById("tabela-clientes");
      tabela.innerHTML = "<tr><th>Nome</th><th>Telefone</th><th>E-mail</th><th>A√ß√µes</th></tr>";

      const querySnapshot = await getDocs(collection(db, "clientes"));
      querySnapshot.forEach((docSnap) => {
        const dados = docSnap.data();
        const linha = document.createElement("tr");
        linha.innerHTML = `
          <td>${dados.nome}</td>
          <td>${dados.telefone}</td>
          <td>${dados.email}</td>
          <td><button class="btn-delete" onclick="deletarCliente('${docSnap.id}')">Excluir</button></td>
        `;
        tabela.appendChild(linha);
      });
    }

    window.deletarCliente = async function (id) {
      await deleteDoc(doc(db, "clientes", id));
      carregarClientes();
    };

    // FINANCEIRO
    window.addFinanceiro = async function () {
      const cliente = document.getElementById("clienteFinanceiro").value;
      const valor = document.getElementById("valorFinanceiro").value;
      const data = document.getElementById("dataFinanceiro").value;
      const status = document.getElementById("statusFinanceiro").value;

      if (!cliente || !valor || !data || !status) {
        alert("Preencha todos os campos!");
        return;
      }

      try {
        await addDoc(collection(db, "financeiro"), { cliente, valor, data, status });
        alert("Pagamento registrado com sucesso!");
        document.getElementById("clienteFinanceiro").value = "";
        document.getElementById("valorFinanceiro").value = "";
        document.getElementById("dataFinanceiro").value = "";
        document.getElementById("statusFinanceiro").value = "pendente";
        carregarFinanceiro();
      } catch (e) {
        console.error("Erro ao adicionar pagamento: ", e);
      }
    };

    async function carregarFinanceiro() {
      const tabela = document.getElementById("tabela-financeiro");
      tabela.innerHTML = "<tr><th>Cliente</th><th>Valor</th><th>Data</th><th>Status</th><th>A√ß√µes</th></tr>";

      const querySnapshot = await getDocs(collection(db, "financeiro"));
      querySnapshot.forEach((docSnap) => {
        const dados = docSnap.data();
        const linha = document.createElement("tr");
        linha.innerHTML = `
          <td>${dados.cliente}</td>
          <td>${dados.valor}</td>
          <td>${dados.data}</td>
          <td>${dados.status}</td>
          <td><button class="btn-delete" onclick="deletarFinanceiro('${docSnap.id}')">Excluir</button></td>
        `;
        tabela.appendChild(linha);
      });
    }

    window.deletarFinanceiro = async function (id) {
      await deleteDoc(doc(db, "financeiro", id));
      carregarFinanceiro();
    };

    // Carrega dados ao iniciar
    carregarClientes();
    carregarFinanceiro();
  </script>
</body>
</html>
